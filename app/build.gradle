plugins {
    id 'application'
    id "org.flywaydb.flyway" version '5.2.4'
}

repositories {
    jcenter()
}

dependencies {
    compile 'mysql:mysql-connector-java:8.0.12'

    testImplementation 'org.testng:testng:7.2.0'

    implementation 'com.google.guava:guava:29.0-jre'
    implementation group: 'mysql', name: 'mysql-connector-java', version: '5.1.6'
}

def dbDriver = "com.mysql.cj.jdbc.Driver"
def dbName = "austinhub"
def dbUrl = "jdbc:mysql://localhost:3306/$dbName?serverTimezone=America/Chicago&useSSL=false"
def dbUser = "root"
def dbPwd = ""

flyway {
    driver = dbDriver
    url = dbUrl
    user = dbUser
    password = dbPwd
    encoding = 'UTF-8'
    locations = ["filesystem:$project.projectDir/src/main/resources/db/migration"]
}

application {
    // Define the main class for the application.
    mainClass = 'AustinHubFlyway.App'
}

tasks.named('test') {
    // Use TestNG for unit tests.
    useTestNG()
}
